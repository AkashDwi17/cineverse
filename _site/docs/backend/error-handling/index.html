<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Error Handling - Cineverse</title>
<meta name="description" content="Error handling and validation patterns in Cineverse">


  <meta name="author" content="AkashDwi17">
  
  <meta property="article:author" content="AkashDwi17">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Cineverse">
<meta property="og:title" content="Error Handling">
<meta property="og:url" content="http://localhost:4000/cineverse/docs/backend/error-handling/">


  <meta property="og:description" content="Error handling and validation patterns in Cineverse">







  <meta property="article:published_time" content="2026-01-18T01:00:39+05:30">



  <meta property="article:modified_time" content="2026-01-18T00:00:00+05:30">




<link rel="canonical" href="http://localhost:4000/cineverse/docs/backend/error-handling/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "AkashDwi17",
      "url": "http://localhost:4000/cineverse/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/cineverse/feed.xml" type="application/atom+xml" rel="alternate" title="Cineverse Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/cineverse/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <link rel="icon" href="/cineverse/assets/images/favicon.svg" type="image/svg+xml">


  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/cineverse/"><img src="/cineverse/assets/images/favicon.ico" alt="Cineverse"></a>
        
        <a class="site-title" href="/cineverse/">
          Cineverse
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/cineverse/docs/introduction/">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/cineverse/docs/quick-start/">Getting Started</a>
            </li><li class="masthead__menu-item">
              <a href="/cineverse/about/">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Getting Started</span>
        

        
        <ul>
          
            <li><a href="/cineverse/docs/introduction/">Introduction</a></li>
          
            <li><a href="/cineverse/docs/installation/">Installation</a></li>
          
            <li><a href="/cineverse/docs/quick-start/">Quick Start</a></li>
          
            <li><a href="/cineverse/docs/diagrams/">Diagrams</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Backend</span>
        

        
        <ul>
          
            <li><a href="/cineverse/docs/backend/api-reference/">API Reference</a></li>
          
            <li><a href="/cineverse/docs/backend/configuration/">Configuration</a></li>
          
            <li><a href="/cineverse/docs/backend/security/">Security</a></li>
          
            <li><a href="/cineverse/docs/backend/error-handling/" class="active">Error Handling</a></li>
          
            <li><a href="/cineverse/docs/backend/auth-service/">Auth Service</a></li>
          
            <li><a href="/cineverse/docs/backend/theatre-service/">Theatre Service</a></li>
          
            <li><a href="/cineverse/docs/backend/movie-service/">Movie Service</a></li>
          
            <li><a href="/cineverse/docs/backend/show-service/">Show Service</a></li>
          
            <li><a href="/cineverse/docs/backend/booking-service/">Booking Service</a></li>
          
            <li><a href="/cineverse/docs/backend/notification-service/">Notification Service</a></li>
          
            <li><a href="/cineverse/docs/backend/api-gateway-eureka/">API Gateway & Eureka</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Database</span>
        

        
        <ul>
          
            <li><a href="/cineverse/docs/database/auth-database/">Auth Database</a></li>
          
            <li><a href="/cineverse/docs/database/theatre-database/">Theatre Database</a></li>
          
            <li><a href="/cineverse/docs/database/show-database/">Show Database</a></li>
          
            <li><a href="/cineverse/docs/database/booking-database/">Booking Database</a></li>
          
            <li><a href="/cineverse/docs/database/movie-database/">Movie Database (Mongo)</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Frontend</span>
        

        
        <ul>
          
            <li><a href="/cineverse/docs/frontend/components/">Components</a></li>
          
            <li><a href="/cineverse/docs/frontend/routing/">Routing & Navigation</a></li>
          
            <li><a href="/cineverse/docs/frontend/state-api/">State & API Integration</a></li>
          
            <li><a href="/cineverse/docs/frontend/ui-components/">UI Components</a></li>
          
            <li><a href="/cineverse/docs/frontend/usereffectvoting/">User Effect Voting</a></li>
          
            <li><a href="/cineverse/docs/frontend/feedback/">Feedback System</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Guides</span>
        

        
        <ul>
          
            <li><a href="/cineverse/docs/deployment/">Deployment</a></li>
          
            <li><a href="/cineverse/docs/troubleshooting/">Troubleshooting</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Error Handling">
    <meta itemprop="description" content="Error handling and validation patterns in Cineverse">
    
    <meta itemprop="dateModified" content="2026-01-18T00:00:00+05:30">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Error Handling
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#error-handling-guide">Error Handling Guide</a><ul><li><a href="#error-response-format">Error Response Format</a></li><li><a href="#global-exception-handler">Global Exception Handler</a></li><li><a href="#custom-exceptions">Custom Exceptions</a><ul><li><a href="#resource-not-found-exception">Resource Not Found Exception</a></li><li><a href="#seat-already-booked-exception">Seat Already Booked Exception</a></li><li><a href="#service-unavailable-exception">Service Unavailable Exception</a></li><li><a href="#bad-request-exception">Bad Request Exception</a></li></ul></li><li><a href="#validation">Validation</a><ul><li><a href="#request-validation">Request Validation</a></li><li><a href="#validation-exception-handler">Validation Exception Handler</a></li></ul></li><li><a href="#http-status-codes">HTTP Status Codes</a><ul><li><a href="#success-codes">Success Codes</a></li><li><a href="#client-error-codes">Client Error Codes</a></li><li><a href="#server-error-codes">Server Error Codes</a></li></ul></li><li><a href="#error-scenarios">Error Scenarios</a><ul><li><a href="#scenario-1-user-not-found">Scenario 1: User Not Found</a></li><li><a href="#scenario-2-invalid-credentials">Scenario 2: Invalid Credentials</a></li><li><a href="#scenario-3-username-already-exists">Scenario 3: Username Already Exists</a></li><li><a href="#scenario-4-seat-already-locked">Scenario 4: Seat Already Locked</a></li><li><a href="#scenario-5-movie-not-found">Scenario 5: Movie Not Found</a></li><li><a href="#scenario-6-validation-errors">Scenario 6: Validation Errors</a></li><li><a href="#scenario-7-unauthorized-access">Scenario 7: Unauthorized Access</a></li><li><a href="#scenario-8-forbidden-access">Scenario 8: Forbidden Access</a></li></ul></li><li><a href="#inter-service-error-handling">Inter-Service Error Handling</a><ul><li><a href="#webclient-error-handling">WebClient Error Handling</a></li></ul></li><li><a href="#logging-best-practices">Logging Best Practices</a><ul><li><a href="#log-levels">Log Levels</a></li><li><a href="#structured-logging">Structured Logging</a></li><li><a href="#dont-log-sensitive-data">Don’t Log Sensitive Data</a></li></ul></li><li><a href="#error-monitoring">Error Monitoring</a><ul><li><a href="#recommended-tools">Recommended Tools</a></li><li><a href="#health-check-endpoint">Health Check Endpoint</a></li></ul></li><li><a href="#testing-error-scenarios">Testing Error Scenarios</a><ul><li><a href="#unit-test-example">Unit Test Example</a></li><li><a href="#integration-test-example">Integration Test Example</a></li></ul></li><li><a href="#best-practices">Best Practices</a></li><li><a href="#error-response-builder">Error Response Builder</a></li><li><a href="#troubleshooting-common-errors">Troubleshooting Common Errors</a><ul><li><a href="#database-connection-error">Database Connection Error</a></li><li><a href="#jwt-validation-failed">JWT Validation Failed</a></li><li><a href="#service-not-found-eureka">Service Not Found (Eureka)</a></li></ul></li><li><a href="#summary">Summary</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <h1 id="error-handling-guide">Error Handling Guide</h1>

<p>This document covers error handling patterns, custom exceptions, validation, and error response formats across the Cineverse platform.</p>

<h2 id="error-response-format">Error Response Format</h2>

<p>All services return consistent error responses:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error message description"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-01-18T00:35:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/movies/invalid-id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h2 id="global-exception-handler">Global Exception Handler</h2>

<p>Each service implements a <code class="language-plaintext highlighter-rouge">@RestControllerAdvice</code> to handle exceptions globally.</p>

<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">GlobalExceptionHandler.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestControllerAdvice</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span> <span class="o">{</span>
    
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">ResourceNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">&gt;</span> <span class="nf">handleNotFound</span><span class="o">(</span>
        <span class="nc">ResourceNotFoundException</span> <span class="n">ex</span><span class="o">,</span>
        <span class="nc">WebRequest</span> <span class="n">request</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Resource not found: {}"</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        
        <span class="nc">ErrorResponse</span> <span class="n">error</span> <span class="o">=</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">())</span>
            <span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">.</span><span class="na">value</span><span class="o">())</span>
            <span class="o">.</span><span class="na">timestamp</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">())</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getDescription</span><span class="o">(</span><span class="kc">false</span><span class="o">))</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">&gt;</span> <span class="nf">handleGenericException</span><span class="o">(</span>
        <span class="nc">Exception</span> <span class="n">ex</span><span class="o">,</span>
        <span class="nc">WebRequest</span> <span class="n">request</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Unexpected error: "</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        
        <span class="nc">ErrorResponse</span> <span class="n">error</span> <span class="o">=</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Internal server error"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="o">.</span><span class="na">value</span><span class="o">())</span>
            <span class="o">.</span><span class="na">timestamp</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">())</span>
            <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getDescription</span><span class="o">(</span><span class="kc">false</span><span class="o">))</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="custom-exceptions">Custom Exceptions</h2>

<h3 id="resource-not-found-exception">Resource Not Found Exception</h3>

<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">exception/ResourceNotFoundException.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResourceNotFoundException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">ResourceNotFoundException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nf">ResourceNotFoundException</span><span class="o">(</span><span class="nc">String</span> <span class="n">resource</span><span class="o">,</span> <span class="nc">String</span> <span class="n">field</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s not found with %s: %s"</span><span class="o">,</span> <span class="n">resource</span><span class="o">,</span> <span class="n">field</span><span class="o">,</span> <span class="n">value</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Usage</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">MovieResponse</span> <span class="nf">get</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">movieRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
        <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">mapToResponse</span><span class="o">)</span>
        <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">ResourceNotFoundException</span><span class="o">(</span><span class="s">"Movie"</span><span class="o">,</span> <span class="s">"id"</span><span class="o">,</span> <span class="n">id</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Response</strong> (404 Not Found):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Movie not found with id: 69246514c412948190c5fb80"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-01-18T00:35:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/movies/69246514c412948190c5fb80"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="seat-already-booked-exception">Seat Already Booked Exception</h3>

<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">exception/SeatAlreadyBookedException.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SeatAlreadyBookedException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">SeatAlreadyBookedException</span><span class="o">(</span><span class="nc">String</span> <span class="n">seat</span><span class="o">,</span> <span class="nc">Long</span> <span class="n">showId</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Seat %s is already booked for show %d"</span><span class="o">,</span> <span class="n">seat</span><span class="o">,</span> <span class="n">showId</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Usage</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">isSeatBooked</span><span class="o">(</span><span class="n">seat</span><span class="o">,</span> <span class="n">showId</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">SeatAlreadyBookedException</span><span class="o">(</span><span class="n">seat</span><span class="o">,</span> <span class="n">showId</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Response</strong> (400 Bad Request):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seat A1 is already booked for show 5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-01-18T00:35:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/bookings/lock"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="service-unavailable-exception">Service Unavailable Exception</h3>

<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">exception/ServiceUnavailableException.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceUnavailableException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">ServiceUnavailableException</span><span class="o">(</span><span class="nc">String</span> <span class="n">service</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s is currently unavailable"</span><span class="o">,</span> <span class="n">service</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Usage</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
    <span class="nc">MovieResponse</span> <span class="n">movie</span> <span class="o">=</span> <span class="n">movieServiceClient</span><span class="o">.</span><span class="na">getMovie</span><span class="o">(</span><span class="n">movieId</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ServiceUnavailableException</span><span class="o">(</span><span class="s">"Movie Service"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h3 id="bad-request-exception">Bad Request Exception</h3>

<p><strong>File</strong>: <code class="language-plaintext highlighter-rouge">exception/BadRequestException.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BadRequestException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Usage</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getSeats</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"At least one seat must be selected"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="validation">Validation</h2>

<h3 id="request-validation">Request Validation</h3>

<p>Use Jakarta Bean Validation annotations:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">record</span> <span class="nf">TheatreRequest</span><span class="o">(</span>
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"Theatre name is required"</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">,</span>
    
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"Address is required"</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">address</span><span class="o">,</span>
    
    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"City is required"</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">city</span><span class="o">,</span>
    
    <span class="nd">@NotNull</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">"Screen type is required"</span><span class="o">)</span>
    <span class="nc">ScreenType</span> <span class="n">screenType</span><span class="o">,</span>
    
    <span class="nd">@Min</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Theatre must have at least 50 seats"</span><span class="o">)</span>
    <span class="nd">@Max</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="mi">500</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"Theatre cannot have more than 500 seats"</span><span class="o">)</span>
    <span class="nc">Integer</span> <span class="n">totalSeats</span>
<span class="o">)</span> <span class="o">{}</span>
</code></pre></div></div>

<p><strong>Controller</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span>
<span class="kd">public</span> <span class="nc">TheatreResponse</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@Valid</span> <span class="nd">@RequestBody</span> <span class="nc">TheatreRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">theatreService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Validation Error Response</strong> (400 Bad Request):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation failed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-01-18T00:35:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/theatres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Theatre name is required"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalSeats"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Theatre must have at least 50 seats"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="validation-exception-handler">Validation Exception Handler</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">&gt;</span> <span class="nf">handleValidationErrors</span><span class="o">(</span>
    <span class="nc">MethodArgumentNotValidException</span> <span class="n">ex</span>
<span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
    
    <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">error</span> <span class="o">-&gt;</span>
        <span class="n">errors</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">getField</span><span class="o">(),</span> <span class="n">error</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">())</span>
    <span class="o">);</span>
    
    <span class="nc">ErrorResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Validation failed"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">.</span><span class="na">value</span><span class="o">())</span>
        <span class="o">.</span><span class="na">timestamp</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">())</span>
        <span class="o">.</span><span class="na">errors</span><span class="o">(</span><span class="n">errors</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        
    <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">badRequest</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="http-status-codes">HTTP Status Codes</h2>

<h3 id="success-codes">Success Codes</h3>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Status</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200</td>
      <td>OK</td>
      <td>Successful GET, PUT requests</td>
    </tr>
    <tr>
      <td>201</td>
      <td>Created</td>
      <td>Successful POST (resource created)</td>
    </tr>
    <tr>
      <td>204</td>
      <td>No Content</td>
      <td>Successful DELETE</td>
    </tr>
  </tbody>
</table>

<h3 id="client-error-codes">Client Error Codes</h3>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Status</th>
      <th>Usage</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>400</td>
      <td>Bad Request</td>
      <td>Invalid request data</td>
      <td>Missing required field</td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized</td>
      <td>Authentication failed</td>
      <td>Invalid credentials</td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden</td>
      <td>Insufficient permissions</td>
      <td>Non-admin accessing admin endpoint</td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found</td>
      <td>Resource doesn’t exist</td>
      <td>Movie ID not found</td>
    </tr>
    <tr>
      <td>409</td>
      <td>Conflict</td>
      <td>Resource conflict</td>
      <td>Username already exists</td>
    </tr>
  </tbody>
</table>

<h3 id="server-error-codes">Server Error Codes</h3>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Status</th>
      <th>Usage</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>500</td>
      <td>Internal Server Error</td>
      <td>Unexpected server error</td>
      <td>Database connection failed</td>
    </tr>
    <tr>
      <td>503</td>
      <td>Service Unavailable</td>
      <td>Service temporarily unavailable</td>
      <td>Dependent service down</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="error-scenarios">Error Scenarios</h2>

<h3 id="scenario-1-user-not-found">Scenario 1: User Not Found</h3>

<p><strong>Request</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/auth/user/nonexistent@example.com
</code></pre></div></div>

<p><strong>Response</strong> (404 Not Found):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-2-invalid-credentials">Scenario 2: Invalid Credentials</h3>

<p><strong>Request</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/auth/login</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wrongpassword"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Response</strong> (401 Unauthorized):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-3-username-already-exists">Scenario 3: Username Already Exists</h3>

<p><strong>Request</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/auth/signup</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"existing@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Response</strong> (400 Bad Request):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username already exists"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-4-seat-already-locked">Scenario 4: Seat Already Locked</h3>

<p><strong>Request</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/bookings/lock</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"showId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seats"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"A2"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Response</strong> (400 Bad Request):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seat A1 is already locked or booked"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-5-movie-not-found">Scenario 5: Movie Not Found</h3>

<p><strong>Request</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/movies/invalid-id
</code></pre></div></div>

<p><strong>Response</strong> (404 Not Found):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Movie not found with id: invalid-id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-6-validation-errors">Scenario 6: Validation Errors</h3>

<p><strong>Request</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/theatres</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"totalSeats"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Response</strong> (400 Bad Request):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation failed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-01-18T00:35:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/theatres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Theatre name is required"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Address is required"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"City is required"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalSeats"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Theatre must have at least 50 seats"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-7-unauthorized-access">Scenario 7: Unauthorized Access</h3>

<p><strong>Request</strong> (no token):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/bookings/user/5
</code></pre></div></div>

<p><strong>Response</strong> (401 Unauthorized):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="scenario-8-forbidden-access">Scenario 8: Forbidden Access</h3>

<p><strong>Request</strong> (USER role trying to create movie):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /api/movies
Authorization: Bearer &lt;user_token&gt;
</code></pre></div></div>

<p><strong>Response</strong> (403 Forbidden):</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access denied. Admin role required."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h2 id="inter-service-error-handling">Inter-Service Error Handling</h2>

<h3 id="webclient-error-handling">WebClient Error Handling</h3>

<p>When calling other services using WebClient:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">ShowDto</span> <span class="nf">getShowById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">showId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">webClient</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"/api/shows/"</span> <span class="o">+</span> <span class="n">showId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="nc">ShowDto</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">block</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">WebClientResponseException</span><span class="o">.</span><span class="na">NotFound</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ResourceNotFoundException</span><span class="o">(</span><span class="s">"Show"</span><span class="o">,</span> <span class="s">"id"</span><span class="o">,</span> <span class="n">showId</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">WebClientException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Failed to fetch show: {}"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ServiceUnavailableException</span><span class="o">(</span><span class="s">"Show Service"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="logging-best-practices">Logging Best Practices</h2>

<h3 id="log-levels">Log Levels</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ERROR - Serious issues requiring immediate attention</span>
<span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Database connection failed"</span><span class="o">,</span> <span class="n">exception</span><span class="o">);</span>

<span class="c1">// WARN - Potentially harmful situations</span>
<span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Failed login attempt for user: {}"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>

<span class="c1">// INFO - Informational messages</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"User {} successfully logged in"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>

<span class="c1">// DEBUG - Detailed information for debugging</span>
<span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Processing booking for show: {}"</span><span class="o">,</span> <span class="n">showId</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="structured-logging">Structured Logging</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Booking created - userId: {}, showId: {}, seats: {}, amount: {}"</span><span class="o">,</span>
    <span class="n">userId</span><span class="o">,</span> <span class="n">showId</span><span class="o">,</span> <span class="n">seats</span><span class="o">,</span> <span class="n">amount</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="dont-log-sensitive-data">Don’t Log Sensitive Data</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// BAD</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"User password: {}"</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"JWT token: {}"</span><span class="o">,</span> <span class="n">token</span><span class="o">);</span>

<span class="c1">// GOOD</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"User {} authenticated successfully"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Token generated for user {}"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>
</code></pre></div></div>

<hr />

<h2 id="error-monitoring">Error Monitoring</h2>

<h3 id="recommended-tools">Recommended Tools</h3>

<ol>
  <li><strong>Spring Boot Actuator</strong> - Health checks and metrics</li>
  <li><strong>Sentry</strong> - Error tracking and monitoring</li>
  <li><strong>ELK Stack</strong> - Centralized logging (Elasticsearch, Logstash, Kibana)</li>
  <li><strong>Prometheus + Grafana</strong> - Metrics and alerting</li>
</ol>

<h3 id="health-check-endpoint">Health Check Endpoint</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/actuator"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HealthController</span> <span class="o">{</span>
    
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/health"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="nf">health</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
            <span class="s">"status"</span><span class="o">,</span> <span class="s">"UP"</span><span class="o">,</span>
            <span class="s">"service"</span><span class="o">,</span> <span class="s">"booking-service"</span>
        <span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="testing-error-scenarios">Testing Error Scenarios</h2>

<h3 id="unit-test-example">Unit Test Example</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">shouldThrowExceptionWhenMovieNotFound</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">when</span><span class="o">(</span><span class="n">movieRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="s">"invalid-id"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">());</span>
    
    <span class="n">assertThrows</span><span class="o">(</span><span class="nc">ResourceNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span>
        <span class="n">movieService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"invalid-id"</span><span class="o">)</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="integration-test-example">Integration Test Example</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">shouldReturn404WhenMovieNotFound</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/api/movies/invalid-id"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isNotFound</span><span class="o">())</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.error"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="s">"Movie not found with id: invalid-id"</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="best-practices">Best Practices</h2>

<ol>
  <li><strong>Use specific exceptions</strong> - Don’t catch generic <code class="language-plaintext highlighter-rouge">Exception</code> unless necessary</li>
  <li><strong>Provide meaningful messages</strong> - Help users understand what went wrong</li>
  <li><strong>Log errors appropriately</strong> - Use correct log levels</li>
  <li><strong>Don’t expose sensitive info</strong> - Never return stack traces to clients</li>
  <li><strong>Handle all exceptions</strong> - Use global exception handler as fallback</li>
  <li><strong>Validate early</strong> - Validate input at controller level</li>
  <li><strong>Return consistent formats</strong> - Use same error response structure</li>
  <li><strong>Use HTTP status codes correctly</strong> - Follow REST conventions</li>
  <li><strong>Monitor errors</strong> - Set up error tracking and alerting</li>
  <li><strong>Test error scenarios</strong> - Write tests for error cases</li>
</ol>

<hr />

<h2 id="error-response-builder">Error Response Builder</h2>

<p>Utility class for building error responses:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Builder</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorResponse</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">error</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">status</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">timestamp</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">path</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">errors</span><span class="o">;</span> <span class="c1">// For validation errors</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="troubleshooting-common-errors">Troubleshooting Common Errors</h2>

<h3 id="database-connection-error">Database Connection Error</h3>

<p><strong>Error</strong>: <code class="language-plaintext highlighter-rouge">Communications link failure</code></p>

<p><strong>Solution</strong>:</p>
<ol>
  <li>Check MySQL is running</li>
  <li>Verify database exists</li>
  <li>Check credentials in <code class="language-plaintext highlighter-rouge">application.properties</code></li>
  <li>Verify port 3306 is accessible</li>
</ol>

<h3 id="jwt-validation-failed">JWT Validation Failed</h3>

<p><strong>Error</strong>: <code class="language-plaintext highlighter-rouge">Invalid JWT signature</code></p>

<p><strong>Solution</strong>:</p>
<ol>
  <li>Ensure JWT secret matches across all services</li>
  <li>Check token hasn’t expired</li>
  <li>Verify token format is correct</li>
</ol>

<h3 id="service-not-found-eureka">Service Not Found (Eureka)</h3>

<p><strong>Error</strong>: <code class="language-plaintext highlighter-rouge">No instances available for service-name</code></p>

<p><strong>Solution</strong>:</p>
<ol>
  <li>Check service is registered in Eureka (http://localhost:8761)</li>
  <li>Verify <code class="language-plaintext highlighter-rouge">eureka.client.service-url.defaultZone</code> is correct</li>
  <li>Wait for service registration (may take 30 seconds)</li>
</ol>

<hr />

<h2 id="summary">Summary</h2>

<p>Effective error handling ensures:</p>
<ul>
  <li><strong>Better user experience</strong> - Clear, actionable error messages</li>
  <li><strong>Easier debugging</strong> - Comprehensive logging and error tracking</li>
  <li><strong>System reliability</strong> - Graceful degradation when errors occur</li>
  <li><strong>Security</strong> - No sensitive information leaked in errors</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2026-01-18">January 18, 2026</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/cineverse/docs/backend/configuration/" class="pagination--pager" title="Configuration Guide
">Previous</a>
    
    
      <a href="/cineverse/docs/backend/movie-service/" class="pagination--pager" title="Movie Service
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
        

        

        
        <li><a href="/cineverse/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
        
    </ul>
</div>

<div class="page__footer-copyright">&copy; 2026 YadnyeshKolte. Powered by <a
        href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a
        href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    
  <script src="/cineverse/assets/js/main.min.js"></script>










  </body>
</html>
