spring.application.name=api-gateway
server.port=9191

spring.main.web-application-type=reactive

eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

spring.cloud.gateway.discovery.locator.enabled=false

spring.cloud.gateway.httpclient.resolver.enabled=false
spring.cloud.gateway.httpclient.connect-timeout=10000
spring.cloud.gateway.httpclient.response-timeout=10s

# Route 0 - Auth Service
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=lb://auth-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

# Route 1 - Theatre Service
spring.cloud.gateway.routes[1].id=theatre-service
spring.cloud.gateway.routes[1].uri=lb://theatre-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/theatres/**

# Route 2 - Movie Service
spring.cloud.gateway.routes[2].id=movie-service
spring.cloud.gateway.routes[2].uri=lb://movie-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/movies/**

# Route 3 - Show Service
spring.cloud.gateway.routes[3].id=show-service
spring.cloud.gateway.routes[3].uri=lb://show-service
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/shows/**

# Route 4 - Booking Service
spring.cloud.gateway.routes[4].id=booking-service
spring.cloud.gateway.routes[4].uri=lb://booking-service
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/bookings/**

# Route 5 - Booking Payments
spring.cloud.gateway.routes[5].id=booking-payment
spring.cloud.gateway.routes[5].uri=lb://booking-service
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/payments/**
spring.cloud.gateway.routes[5].filters[0]=StripPrefix=0

# CORS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=http://localhost:5173
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
